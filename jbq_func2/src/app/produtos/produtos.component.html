<h2>Lista de Produtos</h2>

@if (loading) {
  <p>Carregando produtos...</p>
} @else if (error) {
  <p class="error">Ocorreu um erro: {{ error }}</p>
} @else if (produtos) {
  <table class="lista-produtos">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Pre√ßo</th>
        <th>Estoque</th>
        <th class="acoes"></th>
        </tr>
    </thead>
    <tbody>
      @for (produto of produtos; track produto.id) {
        <tr [attr.produto-id]="produto.id">
          <td>
            @if (editandoId === produto.id) {
              <input type="text" [value]="produto.nome" (input)="produto.nome = $event.target.value">
            } @else {
              {{ produto.nome }}
            }
          </td>
      
          <td>
            @if (editandoId === produto.id) {
              <input type="number" [value]="produto.preco" (input)="produto.preco = +$event.target.value">
            } @else {
              {{ produto.preco | currency:'BRL':'symbol':'1.2-2' }}
            }
          </td>
      
          <td>
            @if (editandoId === produto.id) {
              <input type="number" [value]="produto.estoque" (input)="produto.estoque = +$event.target.value">
            } @else {
              {{ produto.estoque }}
            }
          </td>

          <td class="acoes"> 
            <button class="btn-editar" (click)="onEditar(produto)">
              @if (editandoId === produto.id) { Confirmar } @else { Editar }
            </button>
            <button class="btn-excluir" (click)="onExcluir(produto.id, produto.nome)">Excluir</button>
          </td>
        </tr>
      }
      @empty {
        <tr>
          <td colspan="4">Nenhum produto encontrado.</td>
        </tr>
      }
    </tbody>
  </table>
}
